{
  "hash": "21db19eb928e9622ad47afaf04df3202",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Tarea3_Taller_Seguros_Quarto\"\ntoc: true\ntoc-location: right\ntoc-depth: 2\n---\n\n# Preparación de datos y parámetros\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetwd(\"C:/Users/cubid/Desktop/QUARTO - MATERIAS UNAL/9 CÁLCULO ACTUARIAL/Corte 3 - Seguros\")\n\nlibrary(readxl)\nqx_mujeres <- read_excel(\"qx hombres y mujeres.xls\",\n                         sheet = \"Asegurados - Muj\",\n                         col_types = c(\"numeric\",\"numeric\"))\n\nedades <- qx_mujeres$X\nqx     <- qx_mujeres$qx\n\ni  <- 0.10     # tasa efectiva anual bruta\nr  <- 0.0788   # inflación anual proyectada\nv  <- 1/(1+i)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## 1. Prima entera con fraccionamiento eficiente\n\n**Fórmulas:**\n\n-   Tasa efectiva mensual:\n\n    $$\n      i_{(12)} = 12\\bigl((1+i)^{1/12}-1\\bigr)\n    $$\n\n-   Tablas de vida: $\\displaystyle l_{x+1} = l_x\\,(1 - q_x),\\quad l_0 = 100\\,000.$\n\n-   Valores descontados:\n\n    $$\n      D_x = v^x\\,l_x,\\quad C_x = D_x\\,v\\,q_x\n    $$\n\n-   Momentos decrecientes:\n\n    $$\n      M_x = \\sum_{j=x}^n C_j,\\quad R_x = \\sum_{j=x}^n M_j\n    $$\n\n-   Anualidad entera:\n\n    $$\n      A_x = \\frac{M_x}{D_x},\\quad \\ddot{A}_x = \\frac{R_x}{D_x}\n    $$\n\n-   Prima fraccionaria eficiente:\n\n    $$\n      \\pi_x = \\frac{i}{i_{(12)}}\\Bigl(A_x \\;+\\; r\\,(\\ddot{A}_x - A_x)\\Bigr).\n    $$\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncalcular_primas_entero_fracc_efficient <- function(qx, VA, m) {\n  i_m <- m * ((1 + i)^(1/m) - 1)\n  n   <- length(qx)\n  \n  # l_x\n  lx <- numeric(n); lx[1] <- 100000\n  for(k in 1:(n-1)) lx[k+1] <- lx[k] * (1 - qx[k])\n\n  Dx   <- v^edades * lx\n  Cx   <- Dx * v * qx\n  Mx   <- rev(cumsum(rev(Cx)))\n  Rx   <- rev(cumsum(rev(Mx)))\n  Ax   <- Mx / Dx\n  IA_x <- Rx / Dx\n  \n  prima <- (i / i_m) * (Ax + r * (IA_x - Ax))\n  \n  data.frame(\n    edad   = edades,\n    qx     = qx,\n    Ax     = round(Ax,     6),\n    prima  = round(prima*VA, 6)\n  )\n}\n```\n:::\n\n\n**Uso:** esta prima combina valor presente de pagos y ajuste por inflación fraccional.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprima_entera_aritmetica_frac <- calcular_primas_entero_fracc_efficient(\n  qx, VA = 500000000, m = 12\n)\nView(prima_entera_aritmetica_frac)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## 2. Prima SAE fraccionaria\n\n**Fórmulas adicionales:**\n\n-   Corrección SAE (fraccional):\n\n    $$\n      \\pi_x^{\\mathrm{SAE}} \n        = \\frac{i}{i_{(12)}}\\bigl(A_x + r(\\ddot{A}_x - A_x)\\bigr)\n        \\;+\\; r\\,\\frac{i - i_{(12)}}{i_{(12)}^2}\\,A_x.\n    $$\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncalcular_primas_SAE_fracc <- function(qx, VA, m) {\n  n  <- length(qx)\n  im <- m * ((1 + i)^(1/m) - 1)\n  \n  lx <- numeric(n); lx[1] <- 100000\n  for(k in 1:(n-1)) lx[k+1] <- lx[k] * (1 - qx[k])\n\n  Dx   <- v^edades * lx\n  Cx   <- Dx * v * qx\n  Mx   <- rev(cumsum(rev(Cx)))\n  Rx   <- rev(cumsum(rev(Mx)))\n  Ax   <- Mx / Dx\n  IA_x <- Rx / Dx\n\n  prima_SAE <- (i / im) * (Ax + r * (IA_x - Ax)) +\n               (r * ((i - im) / im^2) * Ax)\n  \n  data.frame(\n    edad  = edades,\n    qx    = qx,\n    Ax    = round(Ax, 6),\n    prima = round(prima_SAE * VA, 6)\n  )\n}\n```\n:::\n\n\n**Interpretación:** se añade término corrector de nivel para SAE.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprima_entera_aritmetica_frac_m <- calcular_primas_SAE_fracc(\n  qx, VA = 500000000, m = 12\n)\nView(prima_entera_aritmetica_frac_m)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## 3. Prima con crecimiento geométrico\n\n**Fórmulas:**\n\n-   Tasa real efectiva:\n\n    $$\n      e = \\frac{1+i}{1+r} - 1,\\quad v_e = \\frac{1}{1+e}.\n    $$\n\n-   Valores descontados real:\n\n    $$\n      D_x^{(e)}=v_e^x\\,l_x,\\quad C_x^{(e)}=D_x^{(e)}\\,v_e\\,q_x.\n    $$\n\n-   Anualidad real:\n\n    $$\n      A_x^{(e)}=\\frac{\\sum_{j=x}^n C_j^{(e)}}{D_x^{(e)}}.\n    $$\n\n-   Prima geométrica:\n\n    $$\n      \\pi_x = \\frac{i}{i_{(12)}}\\,\\frac{A_x^{(e)}}{1+r}.\n    $$\n\n\n::: {.cell}\n\n```{.r .cell-code}\ne  <- (1 + i)/(1 + r) - 1\nVe <- 1 / (1 + e)\n\ncalcular_primas_geom_creciente <- function(qx, VA, m) {\n  n   <- length(qx)\n  i_m <- m * ((1 + i)^(1/m) - 1)\n  \n  lx <- numeric(n); lx[1] <- 100000\n  for(k in 1:(n-1)) lx[k+1] <- lx[k] * (1 - qx[k])\n\n  Dx_e   <- Ve^edades * lx\n  Cx_e   <- Dx_e * Ve * qx\n  Mx_e   <- rev(cumsum(rev(Cx_e)))\n  Ax_e   <- Mx_e / Dx_e\n\n  prima <- (i / i_m) * Ax_e / (1 + r)\n  \n  data.frame(\n    edad   = edades,\n    qx     = qx,\n    Ax_e   = round(Ax_e, 6),\n    prima  = round(prima * VA, 6)\n  )\n}\n```\n:::\n\n\n**Uso:** interesante para seguros reajustados solo por inflación.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprima_geometrica_frac <- calcular_primas_geom_creciente(\n  qx, VA = 500000000, m = 12\n)\nView(prima_geometrica_frac)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## 4. Comparación de crecimientos del valor asegurado\n\nNo hay función aquí; se grafica:\n\n-   Aritmético fraccional: $1 + r\\,(k-1)/m$.\n-   Aritmético anual: $1 + r\\,(t-edad_{start}-1)$.\n-   Geométrico anual: $(1+r)^{t-edad_{start}-1}$.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nr           <- 0.0788;  m <- 12\nedad_inicio <- 20;     edad_fin <- 50\n\ned_int <- (edad_inicio+1):edad_fin\nbenef2 <- 1 + r*(ed_int-(edad_inicio+1))\n\nk       <- 1:((edad_fin-edad_inicio)*m)\nti      <- edad_inicio + k/m\nbenef1  <- 1 + r*((k-1)/m)\nbenef3  <- (1+r)^(ed_int-(edad_inicio+1))\n\nplot(ti, benef1, type=\"l\", col=1, lwd=2,\n     ylim=c(0,max(benef1,benef2,benef3)),\n     xlab=\"Edad\", ylab=\"Beneficio\",\n     main=\"Crecimiento del valor asegurado\")\nlines(ed_int, benef2, col=2, lwd=2)\nlines(ed_int, benef3, col=3, lwd=2)\nlegend(\"topleft\",\n       legend=c(\"Aritmético fracc.\",\"Aritmético anual\",\"Geométrico\"),\n       col=1:3, lwd=2, bty=\"n\")\n```\n\n::: {.cell-output-display}\n![](Tarea3_Taller_Seguros_Quarto_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 5. Tabla comparativa de primas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nVA <- 500000000; m <- 12\naritm   <- calcular_primas_entero_fracc_efficient(qx, VA, m)\naritm_m <- calcular_primas_SAE_fracc(qx, VA, m)\ngeom    <- calcular_primas_geom_creciente(qx, VA, m)\n\ntabla_comparativa <- data.frame(\n  Edad                  = edades,\n  Seguro1_Aritmético    = aritm$prima,\n  Seguro2_Aritmético_m  = aritm_m$prima,\n  Seguro3_Geométrico    = geom$prima\n)\nView(tabla_comparativa)\n```\n:::\n\n",
    "supporting": [
      "Tarea3_Taller_Seguros_Quarto_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}