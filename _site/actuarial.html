<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Actuarial – Estadistica‑Brayan Cubides</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Estadistica‑Brayan Cubides</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./actuarial/index.html"> 
<span class="menu-text">ACTUARIAL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./casos.qmd"> 
<span class="menu-text">Casos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">Acerca de</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Actuarial</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Actuarial</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="funciones-de-pensiones" class="level2">
<h2 class="anchored" data-anchor-id="funciones-de-pensiones">Funciones Pensiones</h2>
</section>
<section id="tabla-de-mortalidad" class="level2">
<h2 class="anchored" data-anchor-id="tabla-de-mortalidad">1. Tabla de mortalidad</h2>
<p>Antes de la función definimos:</p>
<ul>
<li><span class="math inline">\(l_0 = 100\,000\)</span><br>
</li>
<li><span class="math inline">\(d_x = l_x \, q_x\)</span><br>
</li>
<li><span class="math inline">\(l_{x+1} = l_x - d_x\)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/cubid/Desktop/QUARTO - MATERIAS UNAL/9 CÁLCULO ACTUARIAL/Corte 4 - Pensiones"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>qx_mujeres_rentistas <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"qx mujeres rentistas.xlsx"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"numeric"</span>,<span class="st">"numeric"</span>))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>TablaMortalidad <span class="ot">&lt;-</span> <span class="cf">function</span>(qx_df, col_qx, <span class="at">l0 =</span> <span class="dv">100000</span>) {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  edades <span class="ot">&lt;-</span> qx_df<span class="sc">$</span>x</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  qx     <span class="ot">&lt;-</span> qx_df[[col_qx]]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  n      <span class="ot">&lt;-</span> <span class="fu">length</span>(qx)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  lx <span class="ot">&lt;-</span> dx <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  lx[<span class="dv">1</span>] <span class="ot">&lt;-</span> l0</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(n <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    dx[i]   <span class="ot">&lt;-</span> lx[i] <span class="sc">*</span> qx[i]</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    lx[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> lx[i] <span class="sc">-</span> dx[i]</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  dx[n] <span class="ot">&lt;-</span> lx[n] <span class="sc">*</span> qx[n]</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">x =</span> edades, <span class="at">qx =</span> <span class="fu">round</span>(qx,<span class="dv">6</span>), <span class="at">lx =</span> <span class="fu">round</span>(lx))</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>tabla_Rentistas_Mujeres <span class="ot">&lt;-</span> <span class="fu">TablaMortalidad</span>(qx_mujeres_rentistas, <span class="st">"qx"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabla_Rentistas_Mujeres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x       qx     lx
1 0 0.000272 100000
2 1 0.000272  99973
3 2 0.000272  99946
4 3 0.000272  99918
5 4 0.000272  99891
6 5 0.000272  99864</code></pre>
</div>
</div>
</section>
<section id="mesada-pensional-fondo-privado" class="level2">
<h2 class="anchored" data-anchor-id="mesada-pensional-fondo-privado">2. Mesada pensional — Fondo Privado</h2>
<p><strong>Fórmulas:</strong></p>
<ol type="1">
<li><p>Anualidad temporal:</p>
<p><span class="math display">\[
  a_{\bar n|e} = \frac{1 - (1+e)^{-n}}{e}
\]</span></p></li>
<li><p>Valor presente acumulado (fraccional y unitario):</p>
<p><span class="math display">\[
  (VP)^{(m)}_{\bar n|e} = m\;\frac{i}{i^{(m)}}\;\frac{1}{1+r}\;a_{\bar n|e},\quad
  (VP)^{(1)}_{\bar n|e} = \frac{1}{1+r}\;a_{\bar n|e}
\]</span></p></li>
<li><p>Valor presente total y futuro:</p>
<p><span class="math display">\[
  (VP)_{\bar n|e} = (VP)^{(m)}_{\bar n|e} + (VP)^{(1)}_{\bar n|e},\quad
  (VF)_{\bar n|e} = (VP)^{(m)}_{\bar n|e}\,(1+e)^n
\]</span></p></li>
<li><p>Valor presente en edad <span class="math inline">\(x\)</span>:</p>
<p><span class="math display">\[
  D_x(e) = (1+e)^{-(t-x)}\,l_t,\quad
  N_x(e) = \sum_{t=x+1}^\infty D_t(e),\quad
  a_{\bar x|e} = \frac{N_x(e)}{D_x(e)}
\]</span></p></li>
<li><p>Prima de reemplazo:</p>
<p><span class="math display">\[
  \text{tasa}_{\text{rep}} = \frac{(VF)_{\bar n|e}}{(VP)_x}\;\times\;\text{tasa\_cotización},\quad
  \text{mesada} = \text{salario} \times \text{tasa}_{\text{rep}}
\]</span></p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fl">0.03</span>; r <span class="ot">&lt;-</span> <span class="fl">0.0788</span>; i <span class="ot">&lt;-</span> <span class="fl">0.1112</span>; m <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>tasa_cotizacion <span class="ot">&lt;-</span> <span class="fl">0.115</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>edades <span class="ot">&lt;-</span> tabla_Rentistas_Mujeres<span class="sc">$</span>x</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>mesada_privada <span class="ot">&lt;-</span> <span class="cf">function</span>(salario_mensual, n, edad, lx) {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  v   <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>r)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  i_m <span class="ot">&lt;-</span> m<span class="sc">*</span>((<span class="dv">1</span><span class="sc">+</span>i)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span>m)<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1) VP y VF</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  a_n_e   <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">-</span>(<span class="dv">1</span><span class="sc">+</span>e)<span class="sc">^</span>(<span class="sc">-</span>n))<span class="sc">/</span>e</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  VPm     <span class="ot">&lt;-</span> m<span class="sc">*</span>i<span class="sc">/</span>i_m <span class="sc">*</span> v <span class="sc">*</span> a_n_e</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  VP1     <span class="ot">&lt;-</span> v <span class="sc">*</span> a_n_e</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  VP_n_e  <span class="ot">&lt;-</span> VPm <span class="sc">+</span> VP1</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  VF_n_e  <span class="ot">&lt;-</span> VP_n_e <span class="sc">*</span> (<span class="dv">1</span><span class="sc">+</span>e)<span class="sc">^</span>n</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2) VP_x y a_x_e</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  idx     <span class="ot">&lt;-</span> <span class="fu">match</span>(edad, edades)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  ages    <span class="ot">&lt;-</span> edades[idx<span class="sc">:</span><span class="fu">length</span>(edades)]</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  lx_sub  <span class="ot">&lt;-</span> lx[idx<span class="sc">:</span><span class="fu">length</span>(lx)]</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  k_sub   <span class="ot">&lt;-</span> ages <span class="sc">-</span> edad</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  Dxe     <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">+</span>e)<span class="sc">^</span>(<span class="sc">-</span>k_sub) <span class="sc">*</span> lx_sub</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  Nxe     <span class="ot">&lt;-</span> <span class="fu">sum</span>(Dxe[<span class="sc">-</span><span class="dv">1</span>]); Dxe0 <span class="ot">&lt;-</span> Dxe[<span class="dv">1</span>]</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  a_x_e   <span class="ot">&lt;-</span> Nxe <span class="sc">/</span> Dxe0</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  VP_x    <span class="ot">&lt;-</span> <span class="dv">12</span><span class="sc">*</span>(a_x_e<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>r)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>r<span class="sc">*</span>(m<span class="dv">-1</span>)<span class="sc">/</span>(<span class="dv">2</span><span class="sc">*</span>m)) <span class="sc">+</span> (m<span class="dv">-1</span>)<span class="sc">/</span>(<span class="dv">2</span><span class="sc">*</span>m)) <span class="sc">+</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>             a_x_e<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>r)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 3) mesada</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  tasa_rep <span class="ot">&lt;-</span> (VF_n_e <span class="sc">/</span> VP_x) <span class="sc">*</span> tasa_cotizacion</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  salario_mensual <span class="sc">*</span> tasa_rep</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="fu">mesada_privada</span>(<span class="fl">7.7</span> <span class="sc">*</span> <span class="dv">1423500</span>, <span class="at">n =</span> <span class="dv">25</span>, <span class="at">edad =</span> <span class="dv">57</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>               <span class="at">lx =</span> tabla_Rentistas_Mujeres<span class="sc">$</span>lx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2444608</code></pre>
</div>
</div>
</section>
<section id="mesada-pensional-fondo-público" class="level2">
<h2 class="anchored" data-anchor-id="mesada-pensional-fondo-público">3. Mesada pensional — Fondo Público</h2>
<p><strong>Reglas:</strong></p>
<p><span class="math display">\[
\text{tasa}_{\text{rep}} =
\begin{cases}
0.65 - 0.005\,S, &amp; n = 25,\\
0.65 - 0.005\,S + 0.015\,(n-25), &amp; n &gt; 25.
\end{cases}
\]</span> Asumiendo que cada año tuviera 50 semanas solamente.</p>
<p>Y si la mesada es menos de un salario mínimo, el estado subsidiara el restante así sea fondo privado o público.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>SMLV <span class="ot">&lt;-</span> <span class="dv">1423500</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>mesada_publica <span class="ot">&lt;-</span> <span class="cf">function</span>(salario_mensual, n) {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  S <span class="ot">&lt;-</span> salario_mensual <span class="sc">/</span> SMLV</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  tasa_rep <span class="ot">&lt;-</span> <span class="cf">if</span>(n<span class="sc">==</span><span class="dv">25</span>) {</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.65</span> <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>S</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(n<span class="sc">&gt;</span><span class="dv">25</span>) {</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.65</span> <span class="sc">-</span> <span class="fl">0.005</span><span class="sc">*</span>S <span class="sc">+</span> <span class="fl">0.015</span><span class="sc">*</span>(n<span class="dv">-25</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="fu">stop</span>(<span class="st">"Años &lt; 25 no aplican"</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  salario_mensual <span class="sc">*</span> tasa_rep</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">mesada_publica</span>(<span class="fl">2.3</span> <span class="sc">*</span> SMLV, <span class="at">n =</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2090481</code></pre>
</div>
</div>
</section>
<section id="mesada-bajo-reforma-combinada" class="level2">
<h2 class="anchored" data-anchor-id="mesada-bajo-reforma-combinada">4. Mesada bajo reforma combinada</h2>
<p>Se aplica pública hasta <span class="math inline">\(2.3\)</span> SMLV y privada sobre el exceso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mesada_actual <span class="ot">&lt;-</span> <span class="cf">function</span>(salario_mensual, n, edad, lx) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  limite <span class="ot">&lt;-</span> <span class="fl">2.3</span> <span class="sc">*</span> SMLV</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (salario_mensual <span class="sc">&lt;=</span> limite) {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mesada_publica</span>(salario_mensual, n)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    mp    <span class="ot">&lt;-</span> <span class="fu">mesada_publica</span>(limite, n)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    exceso<span class="ot">&lt;-</span> salario_mensual <span class="sc">-</span> limite</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    mpr   <span class="ot">&lt;-</span> <span class="fu">mesada_privada</span>(exceso, n, edad, lx)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    mp <span class="sc">+</span> mpr</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mesada_actual</span>(<span class="dv">10</span> <span class="sc">*</span> SMLV, <span class="at">n =</span> <span class="dv">25</span>, <span class="at">edad =</span> <span class="dv">57</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">lx =</span> tabla_Rentistas_Mujeres<span class="sc">$</span>lx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4535089</code></pre>
</div>
</div>
</section>
<section id="tarea-taller-seguros" class="level2">
<h2 class="anchored" data-anchor-id="tarea-taller-seguros">Taller Seguros</h2>
</section>
<section id="preparación-de-datos-y-parámetros" class="level1">
<h1>Preparación de datos y parámetros</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/cubid/Desktop/QUARTO - MATERIAS UNAL/9 CÁLCULO ACTUARIAL/Corte 3 - Seguros"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>qx_mujeres <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"qx hombres y mujeres.xls"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">sheet =</span> <span class="st">"Asegurados - Muj"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"numeric"</span>,<span class="st">"numeric"</span>))</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>edades <span class="ot">&lt;-</span> qx_mujeres<span class="sc">$</span>X</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>qx     <span class="ot">&lt;-</span> qx_mujeres<span class="sc">$</span>qx</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>i  <span class="ot">&lt;-</span> <span class="fl">0.10</span>     <span class="co"># tasa efectiva anual bruta</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>r  <span class="ot">&lt;-</span> <span class="fl">0.0788</span>   <span class="co"># inflación anual proyectada</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>v  <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<section id="prima-entera-con-fraccionamiento-eficiente" class="level2">
<h2 class="anchored" data-anchor-id="prima-entera-con-fraccionamiento-eficiente">1. Prima entera con fraccionamiento eficiente</h2>
<p><strong>Fórmulas:</strong></p>
<ul>
<li><p>Tasa efectiva mensual:</p>
<p><span class="math display">\[
  i_{(12)} = 12\bigl((1+i)^{1/12}-1\bigr)
\]</span></p></li>
<li><p>Tablas de vida: <span class="math inline">\(\displaystyle l_{x+1} = l_x\,(1 - q_x),\quad l_0 = 100\,000.\)</span></p></li>
<li><p>Valores descontados:</p>
<p><span class="math display">\[
  D_x = v^x\,l_x,\quad C_x = D_x\,v\,q_x
\]</span></p></li>
<li><p>Momentos decrecientes:</p>
<p><span class="math display">\[
  M_x = \sum_{j=x}^n C_j,\quad R_x = \sum_{j=x}^n M_j
\]</span></p></li>
<li><p>Anualidad entera:</p>
<p><span class="math display">\[
  A_x = \frac{M_x}{D_x},\quad \ddot{A}_x = \frac{R_x}{D_x}
\]</span></p></li>
<li><p>Prima fraccionaria eficiente:</p>
<p><span class="math display">\[
  \pi_x = \frac{i}{i_{(12)}}\Bigl(A_x \;+\; r\,(\ddot{A}_x - A_x)\Bigr).
\]</span></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>calcular_primas_entero_fracc_efficient <span class="ot">&lt;-</span> <span class="cf">function</span>(qx, VA, m) {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  i_m <span class="ot">&lt;-</span> m <span class="sc">*</span> ((<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span>m) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  n   <span class="ot">&lt;-</span> <span class="fu">length</span>(qx)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># l_x</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  lx <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n); lx[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">100000</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(n<span class="dv">-1</span>)) lx[k<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> lx[k] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> qx[k])</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  Dx   <span class="ot">&lt;-</span> v<span class="sc">^</span>edades <span class="sc">*</span> lx</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  Cx   <span class="ot">&lt;-</span> Dx <span class="sc">*</span> v <span class="sc">*</span> qx</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  Mx   <span class="ot">&lt;-</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Cx)))</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  Rx   <span class="ot">&lt;-</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Mx)))</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  Ax   <span class="ot">&lt;-</span> Mx <span class="sc">/</span> Dx</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  IA_x <span class="ot">&lt;-</span> Rx <span class="sc">/</span> Dx</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  prima <span class="ot">&lt;-</span> (i <span class="sc">/</span> i_m) <span class="sc">*</span> (Ax <span class="sc">+</span> r <span class="sc">*</span> (IA_x <span class="sc">-</span> Ax))</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">edad   =</span> edades,</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">qx     =</span> qx,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ax     =</span> <span class="fu">round</span>(Ax,     <span class="dv">6</span>),</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">prima  =</span> <span class="fu">round</span>(prima<span class="sc">*</span>VA, <span class="dv">6</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Uso:</strong> esta prima combina valor presente de pagos y ajuste por inflación fraccional.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>prima_entera_aritmetica_frac <span class="ot">&lt;-</span> <span class="fu">calcular_primas_entero_fracc_efficient</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  qx, <span class="at">VA =</span> <span class="dv">500000000</span>, <span class="at">m =</span> <span class="dv">12</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(prima_entera_aritmetica_frac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="prima-sae-fraccionaria" class="level2">
<h2 class="anchored" data-anchor-id="prima-sae-fraccionaria">2. Prima SAE fraccionaria</h2>
<p><strong>Fórmulas adicionales:</strong></p>
<ul>
<li><p>Corrección SAE (fraccional):</p>
<p><span class="math display">\[
  \pi_x^{\mathrm{SAE}}
    = \frac{i}{i_{(12)}}\bigl(A_x + r(\ddot{A}_x - A_x)\bigr)
    \;+\; r\,\frac{i - i_{(12)}}{i_{(12)}^2}\,A_x.
\]</span></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>calcular_primas_SAE_fracc <span class="ot">&lt;-</span> <span class="cf">function</span>(qx, VA, m) {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  n  <span class="ot">&lt;-</span> <span class="fu">length</span>(qx)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  im <span class="ot">&lt;-</span> m <span class="sc">*</span> ((<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span>m) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  lx <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n); lx[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">100000</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(n<span class="dv">-1</span>)) lx[k<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> lx[k] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> qx[k])</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  Dx   <span class="ot">&lt;-</span> v<span class="sc">^</span>edades <span class="sc">*</span> lx</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  Cx   <span class="ot">&lt;-</span> Dx <span class="sc">*</span> v <span class="sc">*</span> qx</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  Mx   <span class="ot">&lt;-</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Cx)))</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  Rx   <span class="ot">&lt;-</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Mx)))</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  Ax   <span class="ot">&lt;-</span> Mx <span class="sc">/</span> Dx</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  IA_x <span class="ot">&lt;-</span> Rx <span class="sc">/</span> Dx</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  prima_SAE <span class="ot">&lt;-</span> (i <span class="sc">/</span> im) <span class="sc">*</span> (Ax <span class="sc">+</span> r <span class="sc">*</span> (IA_x <span class="sc">-</span> Ax)) <span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>               (r <span class="sc">*</span> ((i <span class="sc">-</span> im) <span class="sc">/</span> im<span class="sc">^</span><span class="dv">2</span>) <span class="sc">*</span> Ax)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">edad  =</span> edades,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">qx    =</span> qx,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ax    =</span> <span class="fu">round</span>(Ax, <span class="dv">6</span>),</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">prima =</span> <span class="fu">round</span>(prima_SAE <span class="sc">*</span> VA, <span class="dv">6</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Interpretación:</strong> se añade término corrector de nivel para SAE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>prima_entera_aritmetica_frac_m <span class="ot">&lt;-</span> <span class="fu">calcular_primas_SAE_fracc</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  qx, <span class="at">VA =</span> <span class="dv">500000000</span>, <span class="at">m =</span> <span class="dv">12</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(prima_entera_aritmetica_frac_m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="prima-con-crecimiento-geométrico" class="level2">
<h2 class="anchored" data-anchor-id="prima-con-crecimiento-geométrico">3. Prima con crecimiento geométrico</h2>
<p><strong>Fórmulas:</strong></p>
<ul>
<li><p>Tasa real efectiva:</p>
<p><span class="math display">\[
  e = \frac{1+i}{1+r} - 1,\quad v_e = \frac{1}{1+e}.
\]</span></p></li>
<li><p>Valores descontados real:</p>
<p><span class="math display">\[
  D_x^{(e)}=v_e^x\,l_x,\quad C_x^{(e)}=D_x^{(e)}\,v_e\,q_x.
\]</span></p></li>
<li><p>Anualidad real:</p>
<p><span class="math display">\[
  A_x^{(e)}=\frac{\sum_{j=x}^n C_j^{(e)}}{D_x^{(e)}}.
\]</span></p></li>
<li><p>Prima geométrica:</p>
<p><span class="math display">\[
  \pi_x = \frac{i}{i_{(12)}}\,\frac{A_x^{(e)}}{1+r}.
\]</span></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>e  <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">/</span>(<span class="dv">1</span> <span class="sc">+</span> r) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>Ve <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> e)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>calcular_primas_geom_creciente <span class="ot">&lt;-</span> <span class="cf">function</span>(qx, VA, m) {</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  n   <span class="ot">&lt;-</span> <span class="fu">length</span>(qx)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  i_m <span class="ot">&lt;-</span> m <span class="sc">*</span> ((<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span>m) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  lx <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n); lx[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">100000</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(n<span class="dv">-1</span>)) lx[k<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> lx[k] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> qx[k])</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  Dx_e   <span class="ot">&lt;-</span> Ve<span class="sc">^</span>edades <span class="sc">*</span> lx</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  Cx_e   <span class="ot">&lt;-</span> Dx_e <span class="sc">*</span> Ve <span class="sc">*</span> qx</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  Mx_e   <span class="ot">&lt;-</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(<span class="fu">rev</span>(Cx_e)))</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  Ax_e   <span class="ot">&lt;-</span> Mx_e <span class="sc">/</span> Dx_e</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  prima <span class="ot">&lt;-</span> (i <span class="sc">/</span> i_m) <span class="sc">*</span> Ax_e <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> r)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">edad   =</span> edades,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">qx     =</span> qx,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ax_e   =</span> <span class="fu">round</span>(Ax_e, <span class="dv">6</span>),</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">prima  =</span> <span class="fu">round</span>(prima <span class="sc">*</span> VA, <span class="dv">6</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Uso:</strong> interesante para seguros reajustados solo por inflación.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>prima_geometrica_frac <span class="ot">&lt;-</span> <span class="fu">calcular_primas_geom_creciente</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  qx, <span class="at">VA =</span> <span class="dv">500000000</span>, <span class="at">m =</span> <span class="dv">12</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(prima_geometrica_frac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="comparación-de-crecimientos-del-valor-asegurado" class="level2">
<h2 class="anchored" data-anchor-id="comparación-de-crecimientos-del-valor-asegurado">4. Comparación de crecimientos del valor asegurado</h2>
<p>No hay función aquí; se grafica:</p>
<ul>
<li>Aritmético fraccional: <span class="math inline">\(1 + r\,(k-1)/m\)</span>.</li>
<li>Aritmético anual: <span class="math inline">\(1 + r\,(t-edad_{start}-1)\)</span>.</li>
<li>Geométrico anual: <span class="math inline">\((1+r)^{t-edad_{start}-1}\)</span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>r           <span class="ot">&lt;-</span> <span class="fl">0.0788</span>;  m <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>edad_inicio <span class="ot">&lt;-</span> <span class="dv">20</span>;     edad_fin <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>ed_int <span class="ot">&lt;-</span> (edad_inicio<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span>edad_fin</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>benef2 <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">+</span> r<span class="sc">*</span>(ed_int<span class="sc">-</span>(edad_inicio<span class="sc">+</span><span class="dv">1</span>))</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>k       <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>((edad_fin<span class="sc">-</span>edad_inicio)<span class="sc">*</span>m)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>ti      <span class="ot">&lt;-</span> edad_inicio <span class="sc">+</span> k<span class="sc">/</span>m</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>benef1  <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">+</span> r<span class="sc">*</span>((k<span class="dv">-1</span>)<span class="sc">/</span>m)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>benef3  <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">+</span>r)<span class="sc">^</span>(ed_int<span class="sc">-</span>(edad_inicio<span class="sc">+</span><span class="dv">1</span>))</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ti, benef1, <span class="at">type=</span><span class="st">"l"</span>, <span class="at">col=</span><span class="dv">1</span>, <span class="at">lwd=</span><span class="dv">2</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fu">max</span>(benef1,benef2,benef3)),</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab=</span><span class="st">"Edad"</span>, <span class="at">ylab=</span><span class="st">"Beneficio"</span>,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">main=</span><span class="st">"Crecimiento del valor asegurado"</span>)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(ed_int, benef2, <span class="at">col=</span><span class="dv">2</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(ed_int, benef3, <span class="at">col=</span><span class="dv">3</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topleft"</span>,</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend=</span><span class="fu">c</span>(<span class="st">"Aritmético fracc."</span>,<span class="st">"Aritmético anual"</span>,<span class="st">"Geométrico"</span>),</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">bty=</span><span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="actuarial_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="tabla-comparativa-de-primas" class="level2">
<h2 class="anchored" data-anchor-id="tabla-comparativa-de-primas">5. Tabla comparativa de primas</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>VA <span class="ot">&lt;-</span> <span class="dv">500000000</span>; m <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>aritm   <span class="ot">&lt;-</span> <span class="fu">calcular_primas_entero_fracc_efficient</span>(qx, VA, m)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>aritm_m <span class="ot">&lt;-</span> <span class="fu">calcular_primas_SAE_fracc</span>(qx, VA, m)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>geom    <span class="ot">&lt;-</span> <span class="fu">calcular_primas_geom_creciente</span>(qx, VA, m)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>tabla_comparativa <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Edad                  =</span> edades,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  Seguro1_Aritmético    <span class="ot">=</span> aritm<span class="sc">$</span>prima,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  Seguro2_Aritmético<span class="at">_m  =</span> aritm_m<span class="sc">$</span>prima,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  Seguro3_Geométrico    <span class="ot">=</span> geom<span class="sc">$</span>prima</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(tabla_comparativa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tablas-amortizacion-de-credito" class="level2">
<h2 class="anchored" data-anchor-id="tablas-amortizacion-de-credito">Amortización Crédito</h2>
</section>
<section id="crédito-a-corto-plazo-cuota-fija-pagos-vencidos" class="level2">
<h2 class="anchored" data-anchor-id="crédito-a-corto-plazo-cuota-fija-pagos-vencidos">1. Crédito a corto plazo: Cuota fija, pagos vencidos</h2>
<p>Para calcular la cuota fija (R) se usan las siguientes constantes:</p>
<ul>
<li>Tasa efectiva mensual: <span class="math display">\[
i_{(12)}=\frac{i^{(12)}}{12} = (1 + i)^{1/12} - 1
\]</span></li>
<li>Factor de anualidad mensual: <span class="math display">\[
12 \, a_{\overline{n}|} = \frac{1 - \bigl(1 + i_{(12)}\bigr)^{-12n}}{i_{(12)}}
\]</span></li>
<li>Cuota fija: <span class="math display">\[
R = \frac{VP}{12 \, a_{\overline{n}|}}
\]</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>AmortizacionCortaPlazoFijo <span class="ot">&lt;-</span> <span class="cf">function</span>(n, i, VP) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># n   : plazo en años</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># i   : tasa efectiva anual</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># VP  : valor presente del crédito</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  i12_12 <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>) <span class="sc">-</span> <span class="dv">1</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  m <span class="ot">&lt;-</span> n <span class="sc">*</span> <span class="dv">12</span> <span class="co"># número de pagos m</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  a_mensual <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="dv">1</span> <span class="sc">+</span> i12_12)<span class="sc">^</span>(<span class="sc">-</span>m)) <span class="sc">/</span> i12_12</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cuota fija R</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  R <span class="ot">&lt;-</span> VP <span class="sc">/</span> a_mensual</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># inicializar </span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  Mes        <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>m</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  Cuota      <span class="ot">&lt;-</span> <span class="fu">rep</span>(R, m)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  Intereses  <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  Abono      <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  Saldo      <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  Saldo[<span class="dv">1</span>]   <span class="ot">&lt;-</span> VP</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># amortización</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>m) {</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    Intereses[k] <span class="ot">&lt;-</span> i12_12 <span class="sc">*</span> Saldo[k]</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    Abono[k]     <span class="ot">&lt;-</span> Cuota[k] <span class="sc">-</span> Intereses[k]</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    Saldo[k <span class="sc">+</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> Saldo[k] <span class="sc">-</span> Abono[k]</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mes               =</span> Mes,</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">Cuota             =</span> <span class="fu">round</span>(Cuota,     <span class="dv">2</span>),</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Intereses         =</span> <span class="fu">round</span>(Intereses, <span class="dv">2</span>),</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">AbonoACapital     =</span> <span class="fu">round</span>(Abono,      <span class="dv">2</span>),</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">SaldoRestante     =</span> <span class="fu">round</span>(Saldo[<span class="sc">-</span><span class="dv">1</span>],  <span class="dv">2</span>) <span class="co"># (quitamos el primer saldo de la columna original)</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tabla)</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo:</span></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>tabla_ejemplo <span class="ot">&lt;-</span> <span class="fu">AmortizacionCortaPlazoFijo</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">i =</span> <span class="fl">0.14</span>, <span class="at">VP =</span> <span class="dv">45000000</span>)</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabla_ejemplo, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Mes   Cuota Intereses AbonoACapital SaldoRestante
1   1 1520016  494048.3       1025967      43974033
2   2 1520016  482784.4       1037231      42936802
3   3 1520016  471396.8       1048619      41888183
4   4 1520016  459884.2       1060131      40828052
5   5 1520016  448245.1       1071770      39756281</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(tabla_ejemplo, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Mes   Cuota Intereses AbonoACapital SaldoRestante
32  32 1520016  80760.78       1439255       5916777
33  33 1520016  64959.42       1455056       4461721
34  34 1520016  48984.57       1471031       2990690
35  35 1520016  32834.34       1487181       1503509
36  36 1520016  16506.80       1503509             0</code></pre>
</div>
</div>
<hr>
</section>
<section id="crédito-a-corto-plazo-cuota-decreciente-pagos-vencidos" class="level2">
<h2 class="anchored" data-anchor-id="crédito-a-corto-plazo-cuota-decreciente-pagos-vencidos">2. Crédito a corto plazo: Cuota decreciente, pagos vencidos</h2>
<ul>
<li><p>Abono a capital mensual constante:</p>
<p><span class="math display">\[
i_{(12)}=\frac{i^{(12)}}{12} = (1 + i)^{1/12} - 1
\]</span> <span class="math display">\[
\text{AbonoCapital}_i = \frac{VP}{12*n}
\]</span></p></li>
<li><p>Intereses cada mes: <span class="math display">\[
\text{Intereses}_i = i_{(12)} \times \text{Saldo}_{i-1}
\]</span></p></li>
<li><p>Cuota mensual variable: <span class="math display">\[
\text{Cuota}_i = \text{AbonoCapital}_i + \text{Intereses}_i
\]</span></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>AmortizacionCuotaDecreciente <span class="ot">&lt;-</span> <span class="cf">function</span>(n, i, VP) {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># n   : plazo en años</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># i   : tasa efectiva anual</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># VP  : valor presente del crédito</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  i12_12 <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  m <span class="ot">&lt;-</span> n <span class="sc">*</span> <span class="dv">12</span> <span class="co"># número total de pagos m</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  abono_capital <span class="ot">&lt;-</span> VP <span class="sc">/</span> m <span class="co"># Abono Fijo</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># inicializar</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  Mes           <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>m</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  Cuota         <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  Intereses     <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  AbonoACapital <span class="ot">&lt;-</span> <span class="fu">rep</span>(abono_capital, m)</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  Saldo         <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  Saldo[<span class="dv">1</span>]      <span class="ot">&lt;-</span> VP</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># amortización</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>m) {</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    Intereses[k] <span class="ot">&lt;-</span> i12_12 <span class="sc">*</span> Saldo[k]</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    Cuota[k]     <span class="ot">&lt;-</span> AbonoACapital[k] <span class="sc">+</span> Intereses[k]</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    Saldo[k <span class="sc">+</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> Saldo[k] <span class="sc">-</span> AbonoACapital[k]</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>  tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mes               =</span> Mes,</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Cuota             =</span> <span class="fu">round</span>(Cuota,         <span class="dv">2</span>),</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">Intereses         =</span> <span class="fu">round</span>(Intereses,     <span class="dv">2</span>),</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">AbonoACapital     =</span> <span class="fu">round</span>(AbonoACapital, <span class="dv">2</span>),</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">SaldoRestante     =</span> <span class="fu">round</span>(Saldo[<span class="sc">-</span><span class="dv">1</span>],      <span class="dv">2</span>)</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tabla)</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo:</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>tabla_decreciente <span class="ot">&lt;-</span> <span class="fu">AmortizacionCuotaDecreciente</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">i =</span> <span class="fl">0.14</span>, <span class="at">VP =</span> <span class="dv">45000000</span>)</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabla_decreciente,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Mes   Cuota Intereses AbonoACapital SaldoRestante
1   1 1744048  494048.3       1250000      43750000
2   2 1730325  480324.8       1250000      42500000
3   3 1716601  466601.2       1250000      41250000
4   4 1702878  452877.6       1250000      40000000
5   5 1689154  439154.1       1250000      38750000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(tabla_decreciente,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Mes   Cuota Intereses AbonoACapital SaldoRestante
32  32 1318618  68617.82       1250000       5000000
33  33 1304894  54894.26       1250000       3750000
34  34 1291171  41170.69       1250000       2500000
35  35 1277447  27447.13       1250000       1250000
36  36 1263724  13723.56       1250000             0</code></pre>
</div>
</div>
<hr>
</section>
<section id="largo-plazo-en-pesos-con-inflación-pagos-vencidos" class="level2">
<h2 class="anchored" data-anchor-id="largo-plazo-en-pesos-con-inflación-pagos-vencidos">3. Largo plazo en pesos con inflación, pagos vencidos</h2>
<p>Entradas: tasa real (e), inflación anual (r), años (n), (VP).</p>
<p>Constantes:</p>
<ul>
<li>Tasa anual con inflación: <span class="math display">\[
i = (1+e)(1+r) - 1
\]</span></li>
<li>Tasa mensual efectiva con inflación: <span class="math display">\[
i_{(12)} = \frac{i^{(12)}}{12} = (1 + i)^{1/12} - 1
\]</span></li>
<li>Tasa nominal anual: <span class="math display">\[
i^{(12)}= 12[(1 + i)^{1/12} - 1]
\]</span></li>
<li>Tasa mensual real: <span class="math display">\[
e_{(12)} =\frac{e^{(12)}}{12} = (1+e)^{1/12} - 1,\quad e^{(12)}= 12[(1 + e)^{1/12} - 1]
\]</span></li>
<li>Valor presente anualidad ajustada: <span class="math display">\[
VPa = \frac{i}{i^{(12)}}\cdot \frac{1}{1 + r}\cdot \frac{1 - (1+e)^{-n}}{e} \cdot 12
\]</span></li>
<li>Cuota inicial: <span class="math display">\[
R_0 = \frac{VP}{VPa}
\]</span></li>
</ul>
<p>Cada 12 meses la cuota se ajusta por inflación multiplicando por (1+r).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>AmortizacionLargoPlazoInflacion <span class="ot">&lt;-</span> <span class="cf">function</span>(n, e, r, VP) {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># n   : plazo en años</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># e   : tasa real efectiva anual</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># r   : inflación anual</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># VP  : valor presente del préstamo</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tasa anual con inflación</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  i     <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> e)<span class="sc">*</span>(<span class="dv">1</span> <span class="sc">+</span> r) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tasas</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  i_12_12   <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> i)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>) <span class="sc">-</span> <span class="dv">1</span>       <span class="co"># tasa mensual efectiva con inflación</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  e_12_12   <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> e)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>) <span class="sc">-</span> <span class="dv">1</span>       <span class="co"># tasa mensual real</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  i_12 <span class="ot">&lt;-</span> <span class="dv">12</span> <span class="sc">*</span> i_12_12                 <span class="co"># tasa nominal anual</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  e_12_12 <span class="ot">&lt;-</span> <span class="dv">12</span> <span class="sc">*</span> e_12_12                 <span class="co"># tasa nominal real</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># factor de anualidad real ajustada por inflación</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  VPa <span class="ot">&lt;-</span> (i <span class="sc">/</span> i_12) <span class="sc">*</span> (<span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span> <span class="sc">+</span> r)) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="dv">1</span> <span class="sc">+</span> e)<span class="sc">^</span>(<span class="sc">-</span>n)) <span class="sc">/</span> e <span class="sc">*</span> <span class="dv">12</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cuota inicial (mensual)</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  R0 <span class="ot">&lt;-</span> VP <span class="sc">/</span> VPa</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Inicializar valores</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  m   <span class="ot">&lt;-</span> n <span class="sc">*</span> <span class="dv">12</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>  Mes <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>m</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  Cuota         <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  Intereses     <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>  AbonoACapital <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>  Saldo         <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>  Saldo[<span class="dv">1</span>]      <span class="ot">&lt;-</span> VP</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ciclo mes a mes, actualizando la cuota cada año</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>  R <span class="ot">&lt;-</span> R0</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>m) {</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># cada vez que empieza un nuevo año (mes 1,13,25,...), se ajusta la cuota</span></span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (k <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;&amp;</span> (k <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%%</span> <span class="dv">12</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>      R <span class="ot">&lt;-</span> R <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> r)</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>    Cuota[k]         <span class="ot">&lt;-</span> R</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>    Intereses[k]     <span class="ot">&lt;-</span> i_12_12 <span class="sc">*</span> Saldo[k]</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>    AbonoACapital[k] <span class="ot">&lt;-</span> R <span class="sc">-</span> Intereses[k]</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>    Saldo[k <span class="sc">+</span> <span class="dv">1</span>]     <span class="ot">&lt;-</span> Saldo[k] <span class="sc">-</span> AbonoACapital[k]</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mes               =</span> Mes,</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">Cuota             =</span> <span class="fu">round</span>(Cuota,         <span class="dv">2</span>),</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">Intereses         =</span> <span class="fu">round</span>(Intereses,     <span class="dv">2</span>),</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">AbonoACapital     =</span> <span class="fu">round</span>(AbonoACapital, <span class="dv">2</span>),</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">SaldoRestante     =</span> <span class="fu">round</span>(Saldo[<span class="sc">-</span><span class="dv">1</span>],      <span class="dv">2</span>)</span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo:</span></span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>tabla_largo_plazo <span class="ot">&lt;-</span> <span class="fu">AmortizacionLargoPlazoInflacion</span>(<span class="at">n =</span> <span class="dv">15</span>, <span class="at">e =</span> <span class="fl">0.09</span>, <span class="at">r =</span> <span class="fl">0.05</span>, <span class="at">VP =</span> <span class="dv">300000000</span>)</span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabla_largo_plazo, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Mes   Cuota Intereses AbonoACapital SaldoRestante
1   1 3058893   3393243     -334350.1     300334350
2   2 3058893   3397025     -338131.8     300672482
3   3 3058893   3400850     -341956.4     301014438
4   4 3058893   3404717     -345824.2     301360262
5   5 3058893   3408629     -349735.7     301709998</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(tabla_largo_plazo, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Mes   Cuota Intereses AbonoACapital SaldoRestante
176 176 6056399 331191.52       5725208      23555764
177 177 6056399 266434.79       5789964      17765800
178 178 6056399 200945.59       5855454      11910346
179 179 6056399 134715.67       5921683       5988663
180 180 6056399  67736.63       5988663             0</code></pre>
</div>
</div>
<hr>
</section>
<section id="crédito-en-uvr-cuota-fija-en-uvr-pagos-vencidos" class="level2">
<h2 class="anchored" data-anchor-id="crédito-en-uvr-cuota-fija-en-uvr-pagos-vencidos">4. Crédito en UVR: cuota fija en UVR, pagos vencidos</h2>
<p>Entradas: (e, r, n, VP_, UVR).</p>
<p>Constantes:</p>
<ul>
<li>(VP_{UVR} = )<br>
</li>
<li>Tasa mensual real: <span class="math display">\[
e_{(12)} =\frac{e^{(12)}}{12} = (1+e)^{1/12} - 1,\quad e^{(12)}= 12[(1 + e)^{1/12} - 1]
\]</span></li>
<li>Anualidad mensual en UVR: <span class="math display">\[
12\,a_{\overline{n}|} = \frac{1 - (1+e)^{-n}}{e_{(12)}}
\]</span></li>
<li>Cuota fija en UVR: <span class="math display">\[
R_{UVR} = \frac{VP_{UVR}}{12\,a_{\overline{n}|}}
\]</span></li>
</ul>
<p>Intereses mensuales: (e_{(12)}) saldo en UVR.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>AmortizacionUVR <span class="ot">&lt;-</span> <span class="cf">function</span>(n, e, r, VP_pesos, UVR_valor) {</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># n         : plazo en años</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># e         : tasa real efectiva anual</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># r         : inflación anual</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># VP_pesos  : monto del préstamo en pesos</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># UVR_valor : valor de la UVR</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convertir VP a UVR</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  VP_uvr <span class="ot">&lt;-</span> VP_pesos <span class="sc">/</span> UVR_valor</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tasa mensual real</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  e_12_12 <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">+</span> e)<span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># factor de anualidad mensual en UVR:</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  a_n_12 <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> (<span class="dv">1</span> <span class="sc">+</span> e)<span class="sc">^</span>(<span class="sc">-</span>n)) <span class="sc">/</span> e_12_12</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cuota fija en UVR</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>  R_uvr <span class="ot">&lt;-</span> VP_uvr <span class="sc">/</span> a_n_12</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># inicializar</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>  m   <span class="ot">&lt;-</span> n <span class="sc">*</span> <span class="dv">12</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  Mes <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>m</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  Cuota_uvr     <span class="ot">&lt;-</span> <span class="fu">rep</span>(R_uvr, m)</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>  Intereses_uvr <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>  Abono_uvr     <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m)</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>  Saldo_uvr     <span class="ot">&lt;-</span> <span class="fu">numeric</span>(m <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>  Saldo_uvr[<span class="dv">1</span>]  <span class="ot">&lt;-</span> VP_uvr</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># amortización</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>m) {</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>    Intereses_uvr[k] <span class="ot">&lt;-</span> e_12_12 <span class="sc">*</span> Saldo_uvr[k]</span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>    Abono_uvr[k]     <span class="ot">&lt;-</span> Cuota_uvr[k] <span class="sc">-</span> Intereses_uvr[k]</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>    Saldo_uvr[k <span class="sc">+</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> Saldo_uvr[k] <span class="sc">-</span> Abono_uvr[k]</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mes                =</span> Mes,</span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">Cuota_UVR          =</span> <span class="fu">round</span>(Cuota_uvr,     <span class="dv">0</span>),</span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">Intereses_UVR      =</span> <span class="fu">round</span>(Intereses_uvr, <span class="dv">0</span>),</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">AbonoCapital_UVR   =</span> <span class="fu">round</span>(Abono_uvr,     <span class="dv">0</span>),</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">SaldoRestante_UVR  =</span> <span class="fu">round</span>(Saldo_uvr[<span class="sc">-</span><span class="dv">1</span>], <span class="dv">0</span>)</span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo:</span></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>tabla_uvr <span class="ot">&lt;-</span> <span class="fu">AmortizacionUVR</span>(<span class="at">n =</span> <span class="dv">15</span>, <span class="at">e =</span> <span class="fl">0.09</span>, <span class="at">r =</span> <span class="fl">0.05</span>, <span class="at">VP_pesos =</span> <span class="dv">300000000</span>, <span class="at">UVR_valor =</span> <span class="fl">322.34</span>)</span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabla_uvr, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Mes Cuota_UVR Intereses_UVR AbonoCapital_UVR SaldoRestante_UVR
1   1      9246          6708             2538            928156
2   2      9246          6690             2557            925599
3   3      9246          6671             2575            923024
4   4      9246          6653             2594            920430
5   5      9246          6634             2612            917818</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(tabla_uvr, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Mes Cuota_UVR Intereses_UVR AbonoCapital_UVR SaldoRestante_UVR
176 176      9246           326             8920             36328
177 177      9246           262             8984             27344
178 178      9246           197             9049             18295
179 179      9246           132             9114              9180
180 180      9246            66             9180                 0</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>